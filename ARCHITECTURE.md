# üó∫Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ SCloudMusicBot

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

---

## üéØ **–Ø–î–†–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø**

### `index.js` 
**–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Express —Å–µ—Ä–≤–µ—Ä
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤–µ–±—Ö—É–∫–∏ –¥–ª—è Telegram
- –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (notifier, broadcast)
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- **–°–≤—è–∑–∞–Ω —Å:** `bot.js`, `services/downloadManager.js`, `services/workerManager.js`, `db.js`, `config.js`

### `bot.js`
**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ (Telegraf)**
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã (Spotify, YouTube, SoundCloud)
- **–°–≤—è–∑–∞–Ω —Å:** 
  - `services/spotifyManager.js` (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è callbacks)
  - `services/youtubeManager.js`
  - `services/searchManager.js`
  - `services/downloadManager.js`
  - `services/shazamService.js`
  - `services/referralManager.js`
  - `db.js`

### `config.js`
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–µ–π
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –≤–µ–∑–¥–µ —á–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç—ã

### `db.js`
**–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (Supabase)**
- –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –∫ PostgreSQL
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö

---

## üéµ **–°–ï–†–í–ò–°–´ –°–ö–ê–ß–ò–í–ê–ù–ò–Ø –ú–£–ó–´–ö–ò**

### `services/downloadManager.js` ‚≠ê **–¶–ï–ù–¢–†–ê–õ–¨–ù–´–ô –ú–ï–ù–ï–î–ñ–ï–†**
**–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∑–æ–∫**
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á (`TaskQueue`)
- –î–µ–ª–µ–≥–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏ –≤–æ—Ä–∫–µ—Ä—É —á–µ—Ä–µ–∑ `taskBroker`
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (SoundCloud, fallback)
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–µ–∫–∏ –≤ Telegram
- –ö—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **–°–≤—è–∑–∞–Ω —Å:**
  - `services/taskBroker.js` (–≥–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
  - `services/spotifyDownloader.js` (–ª–æ–∫–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)
  - `lib/TaskQueue.js` (–æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á)
  - `db.js` (–∫—ç—à, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

### `services/spotifyManager.js`
**–û–±—Ä–∞–±–æ—Ç–∫–∞ Spotify —Å—Å—ã–ª–æ–∫**
- –ü–∞—Ä—Å–∏–Ω–≥ URL (—Ç—Ä–µ–∫–∏, –∞–ª—å–±–æ–º—ã, –ø–ª–µ–π–ª–∏—Å—Ç—ã)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Spotify API
- –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∫–∞—á–µ—Å—Ç–≤–∞
- –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°–≤—è–∑–∞–Ω —Å:**
  - `services/downloadManager.js` (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥—å)
  - `bot.js` (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è callbacks)

### `services/spotifyDownloader.js`
**–°–∫–∞—á–∏–≤–∞–Ω–∏–µ Spotify —Ç—Ä–µ–∫–æ–≤**
- Pipe-—Å—Ç—Ä–∏–º–∏–Ω–≥ (–±—ã—Å—Ç—Ä—ã–π –º–µ—Ç–æ–¥)
- –§–∞–π–ª–æ–≤—ã–π fallback
- –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ YouTube (`ytsearch1`)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ MP3 —á–µ—Ä–µ–∑ ffmpeg
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `services/downloadManager.js` (–ª–æ–∫–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

### `services/youtubeManager.js`
**–û–±—Ä–∞–±–æ—Ç–∫–∞ YouTube —Å—Å—ã–ª–æ–∫**
- –ü–∞—Ä—Å–∏–Ω–≥ YouTube/YouTube Music URL
- –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∫–∞—á–µ—Å—Ç–≤–∞
- **–°–≤—è–∑–∞–Ω —Å:** `services/downloadManager.js`

### `services/taskBroker.js` üîó **–ë–†–û–ö–ï–† –ó–ê–î–ê–ß**
**–°–≤—è–∑—å Master ‚Üî Worker —á–µ—Ä–µ–∑ Redis**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥—å Redis
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç –≤–æ—Ä–∫–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤–æ—Ä–∫–µ—Ä–∞ (heartbeat)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–∏
- **–°–≤—è–∑–∞–Ω —Å:**
  - `services/downloadManager.js` (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á)
  - `hf-worker/worker.js` (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á)
  - Redis (–æ—á–µ—Ä–µ–¥—å, pub/sub)

---

## ü§ñ **–í–û–†–ö–ï–†–´ (–ì–ò–ë–†–ò–î–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê)**

### `worker.js` (–∫–æ—Ä–µ–Ω—å)
**–õ–æ–∫–∞–ª—å–Ω—ã–π –≤–æ—Ä–∫–µ—Ä –¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –ü–ö**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `taskBroker` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `spotifyDownloader` –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- **–°–≤—è–∑–∞–Ω —Å:** `services/taskBroker.js`, `services/spotifyDownloader.js`

### `hf-worker/worker.js` üöÄ **HUGGINGFACE WORKER**
**Standalone –≤–æ—Ä–∫–µ—Ä –¥–ª—è HuggingFace Spaces**
- –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ Redis (`brpop`)
- –°–∫–∞—á–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ `yt-dlp` –Ω–∞–ø—Ä—è–º—É—é
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Telegram Storage
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ Redis pub/sub
- **–°–≤—è–∑–∞–Ω —Å:** `services/taskBroker.js` (—á–µ—Ä–µ–∑ Redis)
- **–ù–µ–∑–∞–≤–∏—Å–∏–º:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### `hf-worker/Dockerfile`
**Docker –æ–±—Ä–∞–∑ –¥–ª—è HuggingFace**
- Node.js 20
- Python 3 + yt-dlp
- FFmpeg
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** HuggingFace Spaces –¥–ª—è –¥–µ–ø–ª–æ—è

---

## üîç **–ü–û–ò–°–ö –ò –†–ê–°–ü–û–ó–ù–ê–í–ê–ù–ò–ï**

### `services/searchManager.js`
**–£–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ SoundCloud**
- –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à + –∂–∏–≤–æ–π –ø–æ–∏—Å–∫
- Fuzzy search (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—á–∞—Ç–æ–∫)
- PostgreSQL `pg_trgm` –¥–ª—è –Ω–µ—á–µ—Ç–∫–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- **–°–≤—è–∑–∞–Ω —Å:** `db.js`, `bot.js`

### `services/shazamService.js`
**–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –º—É–∑—ã–∫–∏ (Shazam)**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ —Ñ–∞–π–ª–æ–≤
- Python bridge —á–µ—Ä–µ–∑ `shazamio`
- **–°–≤—è–∑–∞–Ω —Å:** `bot.js`, `scripts/recognize.py`

### `scripts/recognize.py`
**Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è Shazam**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `shazamio` –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Node.js —á–µ—Ä–µ–∑ `child_process`
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `services/shazamService.js`

---

## üé§ **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–ï–†–í–ò–°–´**

### `services/karaokeService.js`
**–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω—É—Å–æ–≤–æ–∫ (–∫–∞—Ä–∞–æ–∫–µ)**
- –£–¥–∞–ª–µ–Ω–∏–µ –≤–æ–∫–∞–ª–∞ –∏–∑ —Ç—Ä–µ–∫–æ–≤
- **–°–≤—è–∑–∞–Ω —Å:** `bot.js`

### `services/lyricsService.js`
**–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –ø–µ—Å–µ–Ω**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Genius API
- **–°–≤—è–∑–∞–Ω —Å:** `bot.js`

### `services/referralManager.js`
**–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- **–°–≤—è–∑–∞–Ω —Å:** `bot.js`, `db.js`

### `services/broadcastManager.js`
**–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—ã–ª–æ–∫**
- –ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ–¥–∏–∞
- **–°–≤—è–∑–∞–Ω —Å:** `db.js`, `index.js`

### `services/notifier.js`
**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ Premium
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–°–≤—è–∑–∞–Ω —Å:** `db.js`, `index.js`

### `services/settingsManager.js`
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –ë–î
- **–°–≤—è–∑–∞–Ω —Å:** `db.js`

### `services/appState.js`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- Maintenance mode
- Shutdown handling
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `index.js`, `bot.js`

### `services/workerManager.js`
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞–º–∏**
- Graceful shutdown
- Health checks
- **–°–≤—è–∑–∞–Ω —Å:** `index.js`

### `services/redisClient.js`
**Redis –∫–ª–∏–µ–Ω—Ç**
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –≤–µ–∑–¥–µ –≥–¥–µ –Ω—É–∂–µ–Ω Redis

---

## üìä **–ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨**

### `routes/admin.js`
**–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–æ—É—Ç—ã –∞–¥–º–∏–Ω–∫–∏**
- Dashboard
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°–≤—è–∑–∞–Ω —Å:** `db.js`, `views/*.ejs`

### `routes/admin-users.js`
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- –¢–∞—Ä–∏—Ñ—ã –∏ –ª–∏–º–∏—Ç—ã
- **–°–≤—è–∑–∞–Ω —Å:** `db.js`, `views/users.ejs`

### `routes/texts-admin.js`
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞–º–∏ –±–æ—Ç–∞**
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–°–≤—è–∑–∞–Ω —Å:** `config/texts.js`, `views/texts.ejs`

### `views/*.ejs`
**–®–∞–±–ª–æ–Ω—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏**
- `dashboard.ejs` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `users.ejs` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `user-profile.ejs` - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `broadcasts.ejs` - —Ä–∞—Å—Å—ã–ª–∫–∏
- `settings.ejs` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ò –¥—Ä—É–≥–∏–µ...

### `public/static/admin.js` & `admin.css`
**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∞–¥–º–∏–Ω–∫–∏**
- JavaScript –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –°—Ç–∏–ª–∏

---

## üõ† **–í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–ê–ô–õ–´**

### `lib/TaskQueue.js`
**–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∑–∞–≥—Ä—É–∑–∫–∞–º–∏
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è Premium
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `services/downloadManager.js`

### `config/texts.js`
**–¢–µ–∫—Å—Ç—ã –±–æ—Ç–∞**
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `bot.js`, `services/*`

### `Dockerfile` (–∫–æ—Ä–µ–Ω—å)
**Docker –æ–±—Ä–∞–∑ –¥–ª—è Render.com**
- Node.js 20
- Python 3 + yt-dlp
- FFmpeg
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** Render.com –¥–ª—è –¥–µ–ø–ª–æ—è

### `package.json`
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞**
- Node.js –ø–∞–∫–µ—Ç—ã
- –°–∫—Ä–∏–ø—Ç—ã

### `requirements.txt`
**Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
- yt-dlp
- spotdl (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

---

## üîÑ **–°–•–ï–ú–ê –ü–û–¢–û–ö–ê –î–ê–ù–ù–´–•**

### Spotify —Ç—Ä–µ–∫:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí bot.js 
  ‚Üí spotifyManager.js (–ø–∞—Ä—Å–∏–Ω–≥, –º–µ–Ω—é –∫–∞—á–µ—Å—Ç–≤–∞)
    ‚Üí downloadManager.js (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Ä–∫–µ—Ä–∞)
      ‚Üí taskBroker.js (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
        ‚Üí Redis Queue
          ‚Üí hf-worker/worker.js (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ)
            ‚Üí Redis Pub/Sub (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
              ‚Üí taskBroker.js (–ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
                ‚Üí downloadManager.js (–∫—ç—à, –æ—Ç–ø—Ä–∞–≤–∫–∞)
                  ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```

### SoundCloud —Ç—Ä–µ–∫ (–ª–æ–∫–∞–ª—å–Ω–æ):
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí bot.js
  ‚Üí downloadManager.js
    ‚Üí scdl –∏–ª–∏ yt-dlp (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ)
      ‚Üí Telegram Storage
        ‚Üí –ö—ç—à –≤ –ë–î
          ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```

### –ü–æ–∏—Å–∫:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí bot.js
  ‚Üí searchManager.js
    ‚Üí db.js (–ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à)
      ‚Üí SoundCloud API (–µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)
        ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---

## üì¶ **–ó–ê–í–ò–°–ò–ú–û–°–¢–ò –ú–ï–ñ–î–£ –ú–û–î–£–õ–Ø–ú–ò**

```
index.js
  ‚îú‚îÄ‚îÄ bot.js
  ‚îÇ   ‚îú‚îÄ‚îÄ services/spotifyManager.js
  ‚îÇ   ‚îú‚îÄ‚îÄ services/youtubeManager.js
  ‚îÇ   ‚îú‚îÄ‚îÄ services/searchManager.js
  ‚îÇ   ‚îú‚îÄ‚îÄ services/shazamService.js
  ‚îÇ   ‚îú‚îÄ‚îÄ services/referralManager.js
  ‚îÇ   ‚îî‚îÄ‚îÄ services/downloadManager.js
  ‚îÇ       ‚îú‚îÄ‚îÄ services/taskBroker.js ‚Üê‚Üí Redis ‚Üê‚Üí hf-worker/worker.js
  ‚îÇ       ‚îú‚îÄ‚îÄ services/spotifyDownloader.js
  ‚îÇ       ‚îú‚îÄ‚îÄ lib/TaskQueue.js
  ‚îÇ       ‚îî‚îÄ‚îÄ db.js
  ‚îú‚îÄ‚îÄ services/downloadManager.js
  ‚îú‚îÄ‚îÄ services/workerManager.js
  ‚îú‚îÄ‚îÄ services/broadcastManager.js
  ‚îú‚îÄ‚îÄ services/notifier.js
  ‚îî‚îÄ‚îÄ db.js
```

---

## üéØ **–ö–õ–Æ–ß–ï–í–´–ï –°–í–Ø–ó–ò**

1. **bot.js ‚Üî services/** - –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
2. **downloadManager.js ‚Üî taskBroker.js** - –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
3. **taskBroker.js ‚Üî Redis ‚Üî hf-worker/worker.js** - –≥–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
4. **–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã ‚Üî db.js** - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
5. **index.js** - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ

---

## üìù **–ü–†–ò–ú–ï–ß–ê–ù–ò–Ø**

- **hf-worker/** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–¥—É–ª—å –¥–ª—è HuggingFace
- **services/taskBroker.js** - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–≤—è–∑—å Master ‚Üî Worker
- **db.js** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- **config.js** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ `services/` - –º–æ–¥—É–ª—å–Ω—ã–µ, —Å–ª–∞–±–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ

